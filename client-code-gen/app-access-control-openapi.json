{"openapi":"3.0.3","info":{"title":"Forest Access Management - FAM - API","description":"\nForest Access Management API used by the Forest Access Management application\nto Define who has access to what apps, and what roles they will operate under\n once access is granted.\n","contact":{"name":"Team Heartwood","url":"https://apps.nrs.gov.bc.ca/int/confluence/display/FSAST1/Team+Heartwood","email":"SIBIFSAF@victoria1.gov.bc.ca"},"license":{"name":"Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0.html"},"version":"0.0.1"},"paths":{"/fam_applications/{application_id}/user_role_assignment":{"get":{"tags":["FAM Applications"],"summary":"Get Fam Application User Role Assignment","description":"gets the roles assignment associated with an application","operationId":"get_fam_application_user_role_assignment","security":[{"6jfveou69mgford233or30hmta":[]}],"parameters":[{"name":"application_id","in":"path","required":true,"schema":{"type":"integer","title":"Application Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FamApplicationUserRoleAssignmentGet"},"title":"Response Get Fam Application User Role Assignment"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user_role_assignment":{"post":{"tags":["FAM User Role Assignment"],"summary":"Create User Role Assignment","description":"Grant User Access to an application's role.","operationId":"create_user_role_assignment","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FamUserRoleAssignmentCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FamUserRoleAssignmentGet"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"6jfveou69mgford233or30hmta":[]}]}},"/user_role_assignment/{user_role_xref_id}":{"delete":{"tags":["FAM User Role Assignment"],"summary":"Delete User Role Assignment","description":"Remove a specific application's role from user's access.","operationId":"delete_user_role_assignment","security":[{"6jfveou69mgford233or30hmta":[]}],"parameters":[{"name":"user_role_xref_id","in":"path","required":true,"schema":{"type":"integer","title":"User Role Xref Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/forest_clients/search":{"get":{"tags":["FAM Forest Clients"],"summary":"Search","description":"Forest Client(s) search (by defined query parameter(s)).\n\nparam: 'client_number=[query_value]'\n       Note! Current Forest Client API limits it to exact search for a whole 8-digits number.\n\nreturn: List of found FamForestClient. However, currently only 1 exact match returns.","operationId":"search","security":[{"6jfveou69mgford233or30hmta":[]}],"parameters":[{"name":"client_number","in":"query","required":true,"schema":{"type":"string","minLength":3,"maxLength":8,"title":"Client Number"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FamForestClient"},"title":"Response Search"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/identity_search/idir":{"get":{"tags":["IDIR/BCeID Proxy"],"summary":"Idir Search","operationId":"idir_search","security":[{"6jfveou69mgford233or30hmta":[]}],"parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"string","maxLength":20,"title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdimProxyIdirInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/identity_search/bceid":{"get":{"tags":["IDIR/BCeID Proxy"],"summary":"Bceid Search","operationId":"bceid_search","security":[{"6jfveou69mgford233or30hmta":[]}],"parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"string","maxLength":20,"title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdimProxyBceidInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user_terms_conditions/user:validate":{"post":{"tags":["FAM User Terms and Conditions"],"summary":"Validate User Requires Accept Terms And Conditions","operationId":"validate_user_requires_accept_terms_and_conditions","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"boolean","title":"Response Validate User Requires Accept Terms And Conditions"}}}}},"security":[{"6jfveou69mgford233or30hmta":[]}]}},"/user_terms_conditions":{"post":{"tags":["FAM User Terms and Conditions"],"summary":"Create User Terms And Conditions","description":"Create a record for terms and conditions acceptance. \n\nIf no version is provided, we store the 1st version of the terms and conditions.","operationId":"create_user_terms_and_conditions","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"6jfveou69mgford233or30hmta":[]}]}},"/bcsc/token/dev":{"post":{"tags":["BCSC Proxy"],"summary":"Bcsc Token Dev","operationId":"bcsc_token_dev","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/bcsc/token/test":{"post":{"tags":["BCSC Proxy"],"summary":"Bcsc Token Test","operationId":"bcsc_token_test","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/bcsc/token/prod":{"post":{"tags":["BCSC Proxy"],"summary":"Bcsc Token Prod","operationId":"bcsc_token_prod","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/bcsc/userinfo/dev":{"get":{"tags":["BCSC Proxy"],"summary":"Bcsc Userinfo Dev","operationId":"bcsc_userinfo_dev","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/bcsc/userinfo/test":{"get":{"tags":["BCSC Proxy"],"summary":"Bcsc Userinfo Test","operationId":"bcsc_userinfo_test","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/bcsc/userinfo/prod":{"get":{"tags":["BCSC Proxy"],"summary":"Bcsc Userinfo Prod","operationId":"bcsc_userinfo_prod","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/bcsc/jwks.json":{"get":{"tags":["BCSC Proxy"],"summary":"Bcsc Jwks","operationId":"bcsc_jwks","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/smoke_test":{"get":{"tags":["Smoke Test"],"summary":"Smoke Test","description":"List of different applications that are administered by FAM","operationId":"smoke_test","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"FamApplicationUserRoleAssignmentGet":{"properties":{"user_role_xref_id":{"type":"integer","title":"User Role Xref Id"},"user_id":{"type":"integer","title":"User Id"},"role_id":{"type":"integer","title":"Role Id"},"application_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Application Id"},"user":{"$ref":"#/components/schemas/FamUserOnlyName"},"role":{"$ref":"#/components/schemas/FamRoleWithClient"}},"type":"object","required":["user_role_xref_id","user_id","role_id","user","role"],"title":"FamApplicationUserRoleAssignmentGet"},"FamForestClient":{"properties":{"client_name":{"anyOf":[{"type":"string","maxLength":60},{"type":"null"}],"title":"Client Name"},"forest_client_number":{"type":"string","maxLength":8,"title":"Forest Client Number"},"status":{"anyOf":[{"$ref":"#/components/schemas/FamForestClientStatus"},{"type":"null"}]}},"type":"object","required":["forest_client_number"],"title":"FamForestClient"},"FamForestClientStatus":{"properties":{"status_code":{"$ref":"#/components/schemas/FamForestClientStatusType"},"description":{"type":"string","maxLength":10,"title":"Description"}},"type":"object","required":["status_code","description"],"title":"FamForestClientStatus"},"FamForestClientStatusType":{"type":"string","enum":["A","I"],"title":"FamForestClientStatusType"},"FamRoleMin":{"properties":{"role_name":{"type":"string","maxLength":100,"title":"Role Name"},"role_type_code":{"$ref":"#/components/schemas/RoleType"},"application_id":{"type":"integer","title":"Application Id"}},"type":"object","required":["role_name","role_type_code","application_id"],"title":"FamRoleMin"},"FamRoleWithClient":{"properties":{"role_name":{"type":"string","maxLength":100,"title":"Role Name"},"role_purpose":{"anyOf":[{"type":"string","maxLength":300},{"type":"null"}],"title":"Role Purpose"},"parent_role_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Reference role_id to higher role"},"application_id":{"type":"integer","title":"Application this role is associated with"},"forest_client_number":{"anyOf":[{"type":"string","maxLength":8},{"type":"null"}],"title":"Forest Client this role is associated with"},"create_user":{"type":"string","maxLength":100,"title":"Create User"},"role_type_code":{"$ref":"#/components/schemas/RoleType"},"client_number":{"anyOf":[{"$ref":"#/components/schemas/FamForestClient"},{"type":"null"}]},"role_id":{"type":"integer","title":"Role Id"},"parent_role":{"anyOf":[{"$ref":"#/components/schemas/FamRoleMin"},{"type":"null"}]}},"type":"object","required":["role_name","application_id","create_user","role_type_code","role_id"],"title":"FamRoleWithClient"},"FamUserOnlyName":{"properties":{"user_type_code":{"$ref":"#/components/schemas/UserType"},"cognito_user_id":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Cognito User Id"},"user_name":{"type":"string","maxLength":20,"title":"User Name"},"user_guid":{"anyOf":[{"type":"string","maxLength":32,"minLength":32},{"type":"null"}],"title":"User Guid"},"create_user":{"type":"string","maxLength":100,"title":"Create User"},"update_user":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Update User"},"user_type":{"$ref":"#/components/schemas/FamUserType"}},"type":"object","required":["user_type_code","user_name","user_guid","create_user","user_type"],"title":"FamUserOnlyName"},"FamUserRoleAssignmentCreate":{"properties":{"user_name":{"type":"string","maxLength":20,"minLength":3,"title":"User Name"},"user_guid":{"type":"string","maxLength":32,"minLength":32,"title":"User Guid"},"user_type_code":{"$ref":"#/components/schemas/UserType"},"role_id":{"type":"integer","title":"Role Id"},"forest_client_number":{"anyOf":[{"type":"string","maxLength":8,"minLength":1},{"type":"null"}],"title":"Forest Client Number"}},"type":"object","required":["user_name","user_guid","user_type_code","role_id"],"title":"FamUserRoleAssignmentCreate"},"FamUserRoleAssignmentGet":{"properties":{"user_role_xref_id":{"type":"integer","title":"User Role Xref Id"},"user_id":{"type":"integer","title":"User Id"},"role_id":{"type":"integer","title":"Role Id"},"application_id":{"type":"integer","title":"Application Id"}},"type":"object","required":["user_role_xref_id","user_id","role_id","application_id"],"title":"FamUserRoleAssignmentGet"},"FamUserType":{"properties":{"code":{"$ref":"#/components/schemas/UserType"},"description":{"type":"string","maxLength":35,"title":"Description"}},"type":"object","required":["code","description"],"title":"FamUserType"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IdimProxyBceidInfo":{"properties":{"found":{"type":"boolean","title":"Found"},"userId":{"type":"string","maxLength":20,"title":"Userid"},"guid":{"anyOf":[{"type":"string","maxLength":32},{"type":"null"}],"title":"Guid"},"businessGuid":{"anyOf":[{"type":"string","maxLength":32},{"type":"null"}],"title":"Businessguid"},"businessLegalName":{"anyOf":[{"type":"string","maxLength":60},{"type":"null"}],"title":"Businesslegalname"},"firstName":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Firstname"},"lastName":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Lastname"}},"type":"object","required":["found","userId"],"title":"IdimProxyBceidInfo"},"IdimProxyIdirInfo":{"properties":{"found":{"type":"boolean","title":"Found"},"userId":{"type":"string","maxLength":20,"title":"Userid"},"guid":{"anyOf":[{"type":"string","maxLength":32},{"type":"null"}],"title":"Guid"},"firstName":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Firstname"},"lastName":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Lastname"}},"type":"object","required":["found","userId"],"title":"IdimProxyIdirInfo"},"RoleType":{"type":"string","enum":["A","C"],"title":"RoleType"},"UserType":{"type":"string","enum":["I","B"],"title":"UserType"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"6jfveou69mgford233or30hmta":{"type":"oauth2","flows":{"authorizationCode":{"scopes":{},"authorizationUrl":"https://dev-fam-user-pool-domain.auth.ca-central-1.amazoncognito.com/authorize","tokenUrl":"https://dev-fam-user-pool-domain.auth.ca-central-1.amazoncognito.com/token"}}}}},"tags":[{"name":"Forest Access Management - FAM","description":"Controls the user access to different Forest basedapplications and what roles different users will have once logged in"}]}